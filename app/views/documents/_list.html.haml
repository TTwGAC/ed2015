%h3 Documents
.row
  .span6.box
    %h4 Public Documents
    %p
      Public documents are shared with players during the course of the game. DO NOT PUT SPOILERS INTO THESE DOCUMENTS!
    - if documentable.documents_for_players.count > 0
      %table.table
        %tr
          %th Name
          %th Description
          %th Actions
        - documentable.documents_for_players.each do |document|
          %tr
            %td= link_to document.name, document.file_url
            %td= document.description
            %td
              = link_to "&#x270e;".html_safe, edit_document_path(document)
              |
              = link_to "&times;".html_safe, document, method: :delete, data: { confirm: 'Really delete this document?' }
    - else
      %br
      %p{style: 'font-style: italic'} No documents found
    %div.show_modal{onclick: "$('#new_document').modal(); $('#document_private').prop('checked', false)"}
      Attach New Document

  .span6.box
    %h4 PRIVATE Documents
    %p
      Private documents are never sent to players. They contain sensitive, possibly spoiler, information and should not be shared!
    - if documentable.documents_for_game_control.count > 0
      %table.table
        %tr
          %th Name
          %th Description
          %th Actions
        - documentable.documents_for_game_control.each do |document|
          %tr
            %td= link_to document.name, document.file_url
            %td= document.description
            %td
              = link_to "&#x270e;".html_safe, edit_document_path(document)
              |
              = link_to "&times;".html_safe, document, method: :delete, data: { confirm: 'Really delete this document?' }
    - else
      %br
      %p{style: 'font-style: italic'} No documents found
    %div.show_modal{onclick: "$('#new_document').modal(); $('#document_private').prop('checked', true)"}
      Attach New Document


%br/

#new_document.modal.hide.fade{:tabindex => "-1"}
  .modal-header
    %button.close{"data-dismiss" => "modal", type: 'button'} &times;
    %h3.modal-title Attach New Document
  .modal-body
    .modal-body-content
      = simple_form_for [documentable, Document.new], html: {class: 'form-horizontal'}  do |f|
        %p
          = f.error_notification
          .form-inputs
            = f.input :name
            = f.input :description, as: :text, input_html: {rows: 3, cols: 40}
            = f.input :private
            = f.file_field :file
            = f.hidden_field :file_cache
          .form-actions
            = f.button :submit
