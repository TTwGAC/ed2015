/ This is the button for mobile devices that shows/hides the nav
%a{class: 'btn btn-navbar', "data-toggle" => 'collapse', "data-target" => ".nav-collapse"}
  %span{class: 'icon-bar'}
  %span{class: 'icon-bar'}
  %span{class: 'icon-bar'}

= link_to "Home", root_path, :class => 'brand'

%div{class: 'nav-collapse collapse'}
  %ul{class: 'nav'}
    %li{class: 'dropdown'}
      %a{href: '#', class: 'dropdown-toggle', "data-toggle" => 'dropdown'}
        The Game
        %b{class: 'caret'}
      %ul{class: 'dropdown-menu'}
        %li= link_to 'About', '#'
        %li= link_to 'The Rules', page_path('rules')
        %li= link_to 'Teams', '/teams'
    - if player_signed_in?
      - if can? :manage, :all
        %li{class: 'dropdown', style: 'background-color: #fcc'}
          %a{href: '#', class: 'dropdown-toggle', "data-toggle" => 'dropdown'}
            Game Control
            %b{class: 'caret'}
          %ul{class: 'dropdown-menu'}
            %li= link_to 'Players', players_path
            %li= link_to 'Puzzles', puzzles_path
            %li= link_to 'Locations', locations_path
      - else
        %li
          - if current_player.team_name == 'Observers'
            = link_to 'Join a Team', new_join_attempt_path
          - else
            = link_to current_player.team_name, team_path(current_player.team_id)
  %ul{class: 'nav pull-right'}
    - if player_signed_in?
      %li{class: 'dropdown'}
        %a{href: '#', class: 'dropdown-toggle', "data-toggle" => 'dropdown'}
          Account
          %b{class: 'caret'}
        %ul{class: 'dropdown-menu'}
          %li= link_to('Edit account', edit_player_registration_path)
          %li= link_to('Logout', destroy_player_session_path, :method=>'delete')
    - else
      %li
        = link_to('Login', new_player_session_path)
      %li
        = link_to('Sign up', new_player_registration_path)
